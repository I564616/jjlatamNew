<?xml version="1.0" encoding="iso-8859-1"?>
<!--
 [y] hybris Platform

 Copyright (c) 2018 SAP SE or an SAP affiliate company.  All rights reserved.

 This software is the confidential and proprietary information of SAP
 ("Confidential Information"). You shall not disclose such Confidential
 Information and shall use it only in accordance with the terms of the
 license agreement you entered into with SAP.
-->
<web-app id="jnjgtb2bcommercewebservices" version="3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xmlns="http://java.sun.com/xml/ns/javaee"
		 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
		 metadata-complete="true">
	<absolute-ordering/>

	<display-name>jnjgtb2bcommercewebservices</display-name>

	<!-- spring based filter chain -->
<!--	<filter>-->
<!--		<description>-->
<!--			Spring configured chain of spring filter beans-->
<!--		</description>-->
<!--		<filter-name>commerceWebServicesFilterChain</filter-name>-->
<!--		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>-->
<!--	</filter>-->

	<!-- provides support for ETag and If-None-Match, shallow -->
	<filter>
		<filter-name>ETagFilter</filter-name>
		<filter-class>org.springframework.web.filter.ShallowEtagHeaderFilter</filter-class>
	</filter>

	<!--	<filter>
			<filter-name>clientCredentialsTokenEndpointFilter</filter-name>
			<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
		</filter>-->

<!--	<filter>-->
<!--		<filter-name>httpPutFormFilter</filter-name>-->
<!--		<filter-class>org.springframework.web.filter.HttpPutFormContentFilter</filter-class>-->
<!--	</filter>-->

	<filter>
		<filter-name>hiddenHttpMethodFilter</filter-name>
		<filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
	</filter>

	<filter>
		<filter-name>CORS</filter-name>
		<filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
		<init-param>
			<param-name>cors.supportedMethods</param-name>
			<param-value>GET, POST, HEAD, PUT, PATCH, DELETE, OPTIONS</param-value>
		</init-param>
		<init-param>
			<!-- fix for http://code.google.com/p/chromium/issues/detail?id=108394 -->
			<param-name>cors.supportedHeaders</param-name>
			<param-value>origin, content-type, accept, authorization</param-value>
		</init-param>
	</filter>

	<filter>
		<filter-name>XSSFilter</filter-name>
		<filter-class>de.hybris.platform.servicelayer.web.XSSFilter</filter-class>
	</filter>

	<!-- This filter was created only because of compatibility reason to redirect /rest/oauth/token -> /authorizationserver/oauth/token.
	Turn it on only if you need it.
	<filter>
		<filter-name>oauthRedirectionFilter</filter-name>
		<filter-class>com.jnj.gt.core.request.redirection.OAuthRedirectionFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>oauthRedirectionFilter</filter-name>
		<url-pattern>/oauth/*</url-pattern>
	</filter-mapping>
	-->
	
	<filter-mapping>
		<filter-name>XSSFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<!--	<filter-mapping>
			<filter-name>clientCredentialsTokenEndpointFilter</filter-name>
			<url-pattern>/*</url-pattern>
		</filter-mapping>-->

	<!--<filter-mapping>-->
		<!--<filter-name>SessionHidingRequestFilter</filter-name>-->
		<!--<url-pattern>/oauth/token</url-pattern>-->
	<!--</filter-mapping>-->

	<filter-mapping>
		<filter-name>ETagFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<filter-mapping>
		<filter-name>CORS</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

<!--	<filter-mapping>-->
<!--		<filter-name>commerceWebServicesFilterChain</filter-name>-->
<!--		<servlet-name>springmvc</servlet-name>-->
<!--	</filter-mapping>-->

<!--	<servlet>-->
<!--		<servlet-name>springmvc</servlet-name>-->
<!--		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>-->
<!--		<init-param>-->
<!--			<param-name>contextConfigLocation</param-name>-->
<!--			<param-value></param-value>-->
<!--		</init-param>-->
<!--		<load-on-startup>1</load-on-startup>-->
<!--	</servlet>-->

<!--	<servlet-mapping>-->
<!--		<servlet-name>springmvc</servlet-name>-->
<!--		<url-pattern>/</url-pattern>-->
<!--	</servlet-mapping>-->

	<!-- Uncomment to make v2 available -->
	<filter>
		<description>
			Spring configured chain of spring filter beans
		</description>
		<filter-name>commerceWebServicesFilterChainV2</filter-name>
		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>httpPutFormFilter</filter-name>
		<servlet-name>springmvc-v2</servlet-name>
	</filter-mapping>

	<filter-mapping>
		<filter-name>hiddenHttpMethodFilter</filter-name>
		<servlet-name>springmvc-v2</servlet-name>
	</filter-mapping>

	<filter>
		<filter-name>SessionHidingRequestFilter</filter-name>
		<filter-class>de.hybris.platform.webservicescommons.filter.SessionHidingFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>SessionHidingRequestFilter</filter-name>
		<url-pattern>/v2/*</url-pattern>
	</filter-mapping>


	<filter-mapping>
		<filter-name>commerceWebServicesFilterChainV2</filter-name>
		<servlet-name>springmvc-v2</servlet-name>
	</filter-mapping>

    <servlet>
        <servlet-name>springmvc-v2</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <!--
        disable detect all handler exception resolvers to let the bean created by WebMvcConfigurationSupport#HandlerExceptionResolver takes effect.
        Otherwise, there might be other resolvers defined and inserted before the above bean. As a result the above bean will never be used.
        Always configure The HandlerExceptionResolver in the sub class of WebMvcConfigurationSupport, that means WebConfig class.
        -->
        <init-param>
            <param-name>detectAllHandlerExceptionResolvers</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
        <multipart-config>
            <location></location>
            <max-file-size>10485760</max-file-size>
            <max-request-size>-1</max-request-size>
            <file-size-threshold>0</file-size-threshold>
        </multipart-config>
    </servlet>

	<servlet-mapping>
		<servlet-name>springmvc-v2</servlet-name>
		<url-pattern>/v2/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>springmvc-v2</servlet-name>
		<url-pattern>/v2/medias/*</url-pattern>
	</servlet-mapping>
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>
            WEB-INF/config/common/springmvc-servlet.xml
            WEB-INF/jnjgtb2bcommercewebservices-web-spring.xml
        </param-value>
	</context-param>
	
	<context-param>
		<param-name>contextInitializerClasses</param-name>
		<param-value>de.hybris.platform.webservicescommons.initializer.HybrisPropertiesWebApplicationContextInitializer</param-value>
	</context-param>

	<listener>
		<listener-class>de.hybris.platform.spring.HybrisContextLoaderListener</listener-class>
	</listener>

	<listener>
		<listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
	</listener>

	<session-config>
		<session-timeout>30</session-timeout>
	</session-config>

	<error-page>
		<location>/unknownError.jsp</location>
	</error-page>
	<error-page>
		<error-code>500</error-code>
		<location>/unknownError.jsp</location>
	</error-page>
	<error-page>
		<exception-type>java.lang.Throwable</exception-type>
		<location>/unknownError.jsp</location>
	</error-page>

	<error-page>
		<error-code>404</error-code>
		<location>/error404.jsp</location>
	</error-page>
	<error-page>
		<exception-type>java.lang.Exception</exception-type>
		<location>/exception.jsp</location>
	</error-page>
</web-app>
